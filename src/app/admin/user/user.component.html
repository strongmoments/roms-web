<div class="page-header">
  <div class="row align-items-center">
    <div class="col">
      <h3 class="page-title">User</h3>
      <ul class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">Dashboard</a></li>
        <li class="breadcrumb-item active">User</li>
      </ul>
    </div>
    <div class="col-auto float-end ms-auto">
      <button class="btn add-btn btn-primary"  (click)="openDialog(null)"><i class="fa fa-plus"></i>
        Add User</button>
    </div>
  </div>
</div>
<div class="row filter-row">
  <div class="col-sm-6 col-md-5">
    <div class="form-group form-focus">
      <input type="text" class="form-control floating" [(ngModel)]="searchMe" (keyup.enter)="onSearch()">
      <label class="focus-label">Name / Email</label>
    </div>
  </div>
  <div class="col-sm-6 col-md-4">
    <div class="form-group form-focus select-focus focused">
      <select class="select floating form-control" #myCompany (change)='onOptionsSelected(myCompany.value)'>
        <option value="">All Company</option>
        <option *ngFor="let item of companyList" value="{{item.id}}">{{item.companyName}}</option>
      </select>
      <label class="focus-label">Company</label>
    </div>
  </div>
  <div class="col-sm-6 col-md-3">
    <button class="btn btn-success w-100" (click)="onSearch()"> Search </button>
  </div>
</div>

<div class="dataTables_wrapper dt-bootstrap4 no-footer">
  <table mat-table matSort matSortActive="fullName" matSortDisableClear matSortDirection="asc" [dataSource]="dataSource"
    class="table table-striped custom-table mb-0 datatable dataTable no-footer">
    <ng-container matColumnDef="fullName">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
      <td mat-cell *matCellDef="let element"> {{element.fullName ==='' ?'N/A':element.fullName}}
      </td>
    </ng-container>

    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
      <td mat-cell *matCellDef="let element"> {{element.email}}
      </td>
    </ng-container>

    <ng-container matColumnDef="role">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Role</th>
      <td mat-cell *matCellDef="let element"> {{getRole(element.role) }}
      </td>
    </ng-container>


    <ng-container matColumnDef="companyName">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Company</th>
      <td mat-cell *matCellDef="let element"> {{element.companyName}}
      </td>
    </ng-container>



    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef>Action </th>
      <td mat-cell *matCellDef="let element">

        <button [matMenuTriggerFor]="menu" mat-icon-button>
          <mat-icon class="mat-16" color="primary"><i class="material-icons">more_vert</i></mat-icon>
        </button>
        <mat-menu #menu="matMenu">
          <button class="dropdown-item" (click)="openDialog(element)"><i class="fa fa-pencil m-r-5"></i> Edit</button>
          <button class="dropdown-item" (click)="onDelete(element)"><i class="fa fa-trash-o m-r-5"></i> Delete</button>
        </mat-menu>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

  <div *ngIf="dataSource.data.length === 0" class="no-data">
    <p>No records found</p>
  </div>
</div>

<mat-paginator [length]="totalRecords" [pageIndex]="0" [pageSizeOptions]="[6, 10, 20]" [pageSize]="pagesize">
</mat-paginator>